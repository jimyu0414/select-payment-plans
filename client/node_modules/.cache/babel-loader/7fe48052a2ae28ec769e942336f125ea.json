{"ast":null,"code":"var _jsxFileName = \"/Users/yu/Downloads/payment-plans/client/src/App.js\";\nimport React from 'react';\nimport './Main.scss';\nimport Header from './Components/Header';\nimport PlanCard from './Components/PlanCard';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.handleSubmitPlan = () => {\n      //get the submitted\n      console.log(this.submittedPlan);\n      let plans = this.state.submittedPlans.concat(this.submittedPlan);\n      this.setState({\n        submittedPlans: plans\n      });\n      console.log(this.state.submittedPlans);\n      fetch('/api/submit-to-plan', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state.submittedPlans)\n      }).then(function (data) {\n        //console.log('Request succeed',data)\n        alert('payment plan submitted. \\n \\nCheck http://localhost:3001/api/submitted-plans for all submitted plans');\n      }).catch(function (error) {\n        console.log('Request failed', error);\n      });\n    };\n\n    this.handleSelectedPlan = (paymentCount, interval) => {\n      //console.log(paymentCount,interval);\n      console.log(this.state.submittedPlans);\n      this.submittedPlan.paymentCount = paymentCount;\n      this.submittedPlan.interval = interval;\n    };\n\n    this.submittedPlan = {};\n    this.state = {\n      plans: [],\n      submittedPlans: []\n    };\n  } //load all plans\n\n\n  componentDidMount() {\n    fetch('/api/avaiable-plans').then(res => res.json()).then(plans => this.setState({\n      plans\n    }, () => console.log(plans)));\n    fetch('/api/submitted-plans').then(res => res.json()).then(submittedPlans => this.setState({\n      submittedPlans\n    }, () => console.log(submittedPlans)));\n  }\n  /* \n  export to json file\n  */\n\n\n  render() {\n    let InValidPath = \"#\";\n    /* sort out plans and pass in as props */\n\n    const weeklyPlans = [];\n    const fornightlyPlans = [];\n    const monthlyPlans = [];\n\n    const uuidv4 = require('uuid/v4');\n\n    this.state.plans.forEach(function (plan) {\n      // console.log(plan.interval)\n      plan.id = uuidv4();\n      plan.selectStateClass = \"plan-card__plan-wrapper--plan\";\n\n      switch (plan.interval) {\n        case 'weekly':\n          weeklyPlans.push(plan);\n          break;\n\n        case 'fornightly':\n          fornightlyPlans.push(plan);\n          break;\n\n        case 'monthly':\n          monthlyPlans.push(plan);\n          break;\n\n        default:\n          console.log('Sorry, cannot find' + plan.interval + '.');\n      }\n    });\n    return React.createElement(\"div\", {\n      className: \"app\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: InValidPath,\n      className: \"button button--back\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Back\"), React.createElement(PlanCard, {\n      weeklyPlans: weeklyPlans,\n      fornightlyPlans: fornightlyPlans,\n      monthlyPlans: monthlyPlans,\n      handleSelectedPlan: this.handleSelectedPlan,\n      submitPlan: this.handleSubmitPlan,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/yu/Downloads/payment-plans/client/src/App.js"],"names":["React","Header","PlanCard","App","Component","constructor","handleSubmitPlan","console","log","submittedPlan","plans","state","submittedPlans","concat","setState","fetch","method","headers","body","JSON","stringify","then","data","alert","catch","error","handleSelectedPlan","paymentCount","interval","componentDidMount","res","json","render","InValidPath","weeklyPlans","fornightlyPlans","monthlyPlans","uuidv4","require","forEach","plan","id","selectStateClass","push"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Main.scss';\nimport Header from './Components/Header';\nimport PlanCard from './Components/PlanCard';\n\n\n\nclass App extends React.Component {\n\n    constructor(){\n      super();\n      this.submittedPlan = {};\n      this.state={\n        plans:[],\n        submittedPlans:[]\n      }\n    }\n\n  \n  //load all plans\n  componentDidMount(){\n    fetch('/api/avaiable-plans')\n        .then(res => res.json())\n        .then(plans => this.setState({plans},()=>console.log(plans)));\n\n    fetch('/api/submitted-plans')\n        .then(res => res.json())\n        .then(submittedPlans => this.setState({submittedPlans},()=>console.log(submittedPlans)));\n  } \n\n  /* \n  export to json file\n  */\n  handleSubmitPlan = () => {\n    //get the submitted\n    console.log(this.submittedPlan);\n    let plans = this.state.submittedPlans.concat(this.submittedPlan)\n    \n  this.setState({\n    submittedPlans : plans\n  })\n  \n  console.log(this.state.submittedPlans)\n\n  fetch('/api/submit-to-plan', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(this.state.submittedPlans)\n  })\n  .then(function(data){\n    //console.log('Request succeed',data)\n    alert('payment plan submitted. \\n \\nCheck http://localhost:3001/api/submitted-plans for all submitted plans')\n  })\n  .catch(function(error){\n    console.log('Request failed',error)\n  })\n  }\n\n   /*\n    store the submitted plan while plan on click\n    */\n  handleSelectedPlan = (paymentCount, interval) => {\n    //console.log(paymentCount,interval);\n    console.log(this.state.submittedPlans)\n    this.submittedPlan.paymentCount = paymentCount;\n    this.submittedPlan.interval = interval;\n  }\n\n  render(){\n    let InValidPath = \"#\"\n    /* sort out plans and pass in as props */\n    const weeklyPlans= [];\n    const fornightlyPlans = [];\n    const monthlyPlans = [];\n    const uuidv4 = require('uuid/v4');\n    this.state.plans.forEach(function(plan) {\n      // console.log(plan.interval)\n      plan.id = uuidv4();\n      plan.selectStateClass = \"plan-card__plan-wrapper--plan\";\n      switch (plan.interval) {\n        case 'weekly':\n          weeklyPlans.push(plan)\n          break;\n        case 'fornightly':\n          fornightlyPlans.push(plan)\n          break;\n        case 'monthly':\n          monthlyPlans.push(plan)\n          break;\n        default:\n          console.log('Sorry, cannot find' + plan.interval + '.');\n      }\n    });\n\n    return(\n      <div className=\"app\">\n    <div className=\"app__header\">\n      <Header />\n      <div className=\"container\">\n        <a href={InValidPath} className=\"button button--back\">Back</a>\n        <PlanCard \n        weeklyPlans={weeklyPlans}\n        fornightlyPlans={fornightlyPlans}\n        monthlyPlans={monthlyPlans}\n        handleSelectedPlan={this.handleSelectedPlan}\n        submitPlan = {this.handleSubmitPlan}\n        />\n      </div>\n    </div>\n    </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/yu/Documents/GitHub/select-payment-plans/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yu/Documents/GitHub/select-payment-plans/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yu/Documents/GitHub/select-payment-plans/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yu/Documents/GitHub/select-payment-plans/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yu/Documents/GitHub/select-payment-plans/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./Main.scss';import Header from'./Components/Header';import PlanCard from'./Components/PlanCard';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this));_this.handleSubmitPlan=function(){//get the submitted\nconsole.log(_this.submittedPlan);var submitplans=_this.state.submittedPlans.concat(_this.submittedPlan);fetch('/api/submit-to-plan',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(submitplans)}).then(function(data){//console.log('Request succeed',data)\nalert('payment plan submitted. \\n \\nCheck http://localhost:3001/api/submitted-plans for all submitted plans');}).catch(function(error){console.log('Request failed',error);});};_this.handleSelectedPlan=function(paymentCount,interval){//console.log(paymentCount,interval);\nconsole.log(_this.state.submittedPlans);_this.submittedPlan.paymentCount=paymentCount;_this.submittedPlan.interval=interval;};_this.submittedPlan={};_this.state={plans:[],submittedPlans:[]};return _this;}//load all plans\n_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('/api/avaiable-plans').then(function(res){return res.json();}).then(function(plans){return _this2.setState({plans:plans},function(){return console.log(plans);});});fetch('/api/submitted-plans').then(function(res){return res.json();}).then(function(submittedPlans){return _this2.setState({submittedPlans:submittedPlans},function(){return console.log(submittedPlans);});});}/* \n  export to json file\n  */},{key:\"render\",value:function render(){var InValidPath=\"#\";/* sort out plans and pass in as props */var weeklyPlans=[];var fornightlyPlans=[];var monthlyPlans=[];var uuidv4=require('uuid/v4');this.state.plans.forEach(function(plan){// console.log(plan.interval)\nplan.id=uuidv4();plan.selectStateClass=\"plan-card__plan-wrapper--plan\";switch(plan.interval){case'weekly':weeklyPlans.push(plan);break;case'fornightly':fornightlyPlans.push(plan);break;case'monthly':monthlyPlans.push(plan);break;default:console.log('Sorry, cannot find'+plan.interval+'.');}});return React.createElement(\"div\",{className:\"app\"},React.createElement(\"div\",{className:\"app__header\"},React.createElement(Header,null),React.createElement(\"div\",{className:\"container\"},React.createElement(\"a\",{href:InValidPath,className:\"button button--back\"},\"Back\"),React.createElement(PlanCard,{weeklyPlans:weeklyPlans,fornightlyPlans:fornightlyPlans,monthlyPlans:monthlyPlans,handleSelectedPlan:this.handleSelectedPlan,submitPlan:this.handleSubmitPlan}))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/yu/Documents/GitHub/select-payment-plans/client/src/App.js"],"names":["React","Header","PlanCard","App","handleSubmitPlan","console","log","submittedPlan","submitplans","state","submittedPlans","concat","fetch","method","headers","body","JSON","stringify","then","data","alert","catch","error","handleSelectedPlan","paymentCount","interval","plans","res","json","setState","InValidPath","weeklyPlans","fornightlyPlans","monthlyPlans","uuidv4","require","forEach","plan","id","selectStateClass","push","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Main.scss';\nimport Header from './Components/Header';\nimport PlanCard from './Components/PlanCard';\n\n\n\nclass App extends React.Component {\n\n    constructor(){\n      super();\n      this.submittedPlan = {};\n      this.state={\n        plans:[],\n        submittedPlans:[]\n      }\n    }\n\n  \n  //load all plans\n  componentDidMount(){\n    fetch('/api/avaiable-plans')\n        .then(res => res.json())\n        .then(plans => this.setState({plans},()=>console.log(plans)));\n\n    fetch('/api/submitted-plans')\n        .then(res => res.json())\n        .then(submittedPlans => this.setState({submittedPlans},()=>console.log(submittedPlans)));\n  } \n\n  /* \n  export to json file\n  */\n  handleSubmitPlan = () => {\n    //get the submitted\n    console.log(this.submittedPlan);\n    let submitplans = this.state.submittedPlans.concat(this.submittedPlan)\n\n\n  fetch('/api/submit-to-plan', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(submitplans)\n  })\n  .then(function(data){\n    //console.log('Request succeed',data)\n    alert('payment plan submitted. \\n \\nCheck http://localhost:3001/api/submitted-plans for all submitted plans')\n  })\n  .catch(function(error){\n    console.log('Request failed',error)\n  })\n  }\n\n   /*\n    store the submitted plan while plan on click\n    */\n  handleSelectedPlan = (paymentCount, interval) => {\n    //console.log(paymentCount,interval);\n    console.log(this.state.submittedPlans)\n    this.submittedPlan.paymentCount = paymentCount;\n    this.submittedPlan.interval = interval;\n  }\n\n  render(){\n    let InValidPath = \"#\"\n    /* sort out plans and pass in as props */\n    const weeklyPlans= [];\n    const fornightlyPlans = [];\n    const monthlyPlans = [];\n    const uuidv4 = require('uuid/v4');\n    this.state.plans.forEach(function(plan) {\n      // console.log(plan.interval)\n      plan.id = uuidv4();\n      plan.selectStateClass = \"plan-card__plan-wrapper--plan\";\n      switch (plan.interval) {\n        case 'weekly':\n          weeklyPlans.push(plan)\n          break;\n        case 'fornightly':\n          fornightlyPlans.push(plan)\n          break;\n        case 'monthly':\n          monthlyPlans.push(plan)\n          break;\n        default:\n          console.log('Sorry, cannot find' + plan.interval + '.');\n      }\n    });\n\n    return(\n      <div className=\"app\">\n    <div className=\"app__header\">\n      <Header />\n      <div className=\"container\">\n        <a href={InValidPath} className=\"button button--back\">Back</a>\n        <PlanCard \n        weeklyPlans={weeklyPlans}\n        fornightlyPlans={fornightlyPlans}\n        monthlyPlans={monthlyPlans}\n        handleSelectedPlan={this.handleSelectedPlan}\n        submitPlan = {this.handleSubmitPlan}\n        />\n      </div>\n    </div>\n    </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}